CREATE DATABASE refugio_canino;
USE refugio_canino;


-- -------------------------	CREACION DE TABLAS -----------------------
CREATE TABLE empleados (
    id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(255),
    fechaNacimiento DATE,
    ciudad VARCHAR(255),
    colonia VARCHAR(255),
    cp VARCHAR(10),
    sueldo VARCHAR(20),
    telefono VARCHAR(15),
    contrasena VARCHAR(255) NOT NULL
);

CREATE TABLE mascotas(
	id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(255),
    tipo VARCHAR(255),
    raza VARCHAR(255),
    edad INT,
    sexo ENUM('Macho','Hembra'),
    color VARCHAR(30),
    peso DOUBLE
);

CREATE TABLE clientes(
	id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(255),
    apellido_paterno VARCHAR(255) NOT NULL,
    apellido_materno VARCHAR(255),
    telefono CHAR(10),
    correoElectronico VARCHAR(255),
    contrasena VARCHAR(255) NOT NULL,
    colonia VARCHAR(255),
    calle VARCHAR(255),
    ciudad VARCHAR(255),
    cp INTEGER,
    fechaRegistro DATE
);
CREATE TABLE adopcion(
	id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    nombreCliente VARCHAR(255),
    domicilioCliente VARCHAR(255),
    telefonoCliente CHAR(10),
    referencias VARCHAR(255),
    motivoAdopcion VARCHAR(255),
    fechaAdopcion DATE,
    nombreMascota VARCHAR(255)
);

CREATE TABLE vacunas(
	id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    nombreCientifico VARCHAR(255),
    nombreComun VARCHAR(255),
    efectosSecundarios VARCHAR(255),
    numeroDosis INT,
    fechaVacunacion DATE,
    id_mascota INT,
	FOREIGN KEY (id_mascota) references mascotas(id) 
);

CREATE TABLE reporteMaltratos(
	id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    descripcion VARCHAR(255),
    estado ENUM('ATENDIDO','EN ESPERA','FINALIZADO'),
    fecha DATE,
    id_mascota INT,
    FOREIGN KEY (nombre_mascota) references mascotas(nombre),
	FOREIGN KEY (id_mascota) references mascotas(id)
);

CREATE TABLE reportePerdidas(
	id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
	nombre_mascota VARCHAR(255),
    descripcion VARCHAR(255),
    estado ENUM('ATENDIDO','EN ESPERA','FINALIZADO'),
    fecha DATE,
    colonia VARCHAR(255),
    calle VARCHAR(255),
    ciudad VARCHAR(255),
    cp VARCHAR(10),
    id_mascota INT,
	FOREIGN KEY (id_mascota) references mascotas(id)
);

CREATE TABLE servicioCastracion(
	id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    costo DOUBLE,
    fecha DATE,
    id_mascota INT,
	FOREIGN KEY (id_mascota) references mascotas(id)
);

-- -------------------------	INSERTAR DATOS DE PRUEBA -----------------------

INSERT INTO empleados (nombre, fechaNacimiento, ciudad, colonia, cp, sueldo, telefono, contrasena)
VALUES 
    ('María López', '1990-05-15', 'Ciudad de México', 'Centro', '12345', '$2500', '5551234567', '123'),
    ('Juan Pérez', '1985-09-20', 'Guadalajara', 'Zona Norte', '54321', '$3000', '5559876543', '123');
    
INSERT INTO mascotas (nombre, tipo, raza, edad, sexo, color, peso)
VALUES('Goyo', 'Gato', 'Naranjoso', 4, 1,'Naranja', 15);

INSERT INTO clientes(nombre, apellido_paterno, telefono, correoElectronico, contrasena, colonia, calle, ciudad, cp, fechaRegistro)
VALUES('Leopoldo','Silva', '6121234567', 'YoteBiCampeon@UNAM.mx','123', 'Roma', 'Universidad', 'DF', 23076, '2024-05-02');

INSERT INTO adopcion(nombreCliente, domicilioCliente, telefonoCliente, referencias, motivoAdopcion, fechaAdopcion, nombreMascota)
VALUES('Leopoldo Silva', 'Roma, Universidad, 20042', '6121234567', 'Hugo Sanchez', 'Estoy triste y solo y necesito compañia', '2024-05-02', 'Goyo');

INSERT INTO vacunas (nombreCientifico, nombreComun, efectosSecundarios, numeroDosis, fechaVacunacion, id_mascota)
VALUES('Astrasenica', 'COVID', 'Trombosis', 4, '2021-06-22', 1);

INSERT INTO reporteMaltratos (descripcion, estado, fecha, id_mascota)
VALUES('Le pegan por jugar feo', 2, '2024-01-01', 1);
 
INSERT INTO reportePerdidas (descripcion, estado, fecha, colonia, calle, ciudad, cp, id_mascota)
VALUES('Se escapo por violencia intrafamiliar', 1, '2024-01-02', 'Roma', 'Universidad', 'DF', '20042', 1);

INSERT INTO servicioCastracion (costo, fecha, id_mascota)
VALUES(100, '2024-02-01', 1);

SELECT * FROM adopcion;
SELECT * FROM clientes;
SELECT * FROM empleados;
SELECT * FROM mascotas;
SELECT * FROM reporteMaltratos;
SELECT * FROM reportePerdidas; 
SELECT * FROM servicioCastracion;
SELECT * FROM vacuna;



drop table mascotas;
drop table reportePerdidas;

DROP DATABASE refugio_canino;